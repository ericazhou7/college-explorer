{"code":"!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,\"a\",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p=\"\",a(a.s=0)}([function(t,e){var a={},n={},r={},i={},l={},o={},d=0,s=600,c=500,p=30,u=d3.scale.linear().domain([0,1]).range([p,s-2*p]),f=d3.scale.linear().domain([0,1]).range([c-p,p]);function v(t){var e=d3.select(\"#filter-space\").append(\"div\").style(\"display\",\"none\").attr(\"class\",\"filter-tool\").attr(\"id\",t.id).append(\"div\").attr(\"id\",t.id).attr(\"class\",\"filter\");for(var n in e.append(\"h4\").text(t.name),a[t.id]=new Set([]),t.options){var i=t.options[n];e.append(\"div\").attr(\"id\",i.id).attr(\"class\",\"filter-option active\").text(i.name).on(\"click\",h(t,i)),a[t.id].add(i.value)}r[t.id]=1}function m(t){d3.select(\"#filter-buttons\").append(\"div\").attr(\"id\",t.id+\"-button\").attr(\"class\",\"filter-button\").text(t.name).on(\"click\",function(t){return function(){!function(t){d3.selectAll(\".filter-button\").classed(\"active\",!1),d3.select(\"#\"+t.id+\"-button\").classed(\"active\",!0),d3.selectAll(\".filter-tool\").style(\"display\",\"none\");d3.select(\"#filter-space\").select(\"#\"+t.id).style(\"display\",\"inline\")}(t)}}(t))}function h(t,e){return function(){!function(t,e){const n=a[t.id].has(e.value);n?a[t.id].delete(e.value):a[t.id].add(e.value);for(var r in S(!1),l){var i=l[r][t.id],d=a[t.id];d.has(i)||(o[r]=-1)}g(),M();d3.select(\"#\"+e.id).classed(\"active\",!n)}(t,e)}}function x(t){var e=d3.sliderHorizontal().domain([t.min,t.max]).default((t.max+t.min)/2).width(125).ticks(2).on(\"onchange\",a=>{n[t.id]=(e.value()-t.min)/(t.max-t.min),S(!0),g(),M()}),a=d3.select(\"#filter-space\").append(\"div\").style(\"display\",\"none\").attr(\"class\",\"filter-tool\").attr(\"id\",t.id);a.append(\"h3\").text(\"Target Value:\");a.append(\"div\").attr(\"class\",\"filter-slider\").append(\"svg\").attr(\"width\",125).attr(\"height\",50).append(\"g\").call(e);n[t.id]=(e.value()-t.min)/(t.max-t.min)}function y(t){d3.select(\"#\"+t.type);var e=d3.sliderHorizontal().max(1).default(.5).width(125).ticks(2).fill(\"rgba(0,180,255,1)\").on(\"onchange\",a=>{r[t.id]=e.value(),S(!0),g(),M(),j()}),a=d3.select(\"#\"+t.id);a.append(\"h3\").text(\"Importance:\"),a.append(\"div\").attr(\"class\",\"filter-weight\").append(\"svg\").attr(\"width\",125).attr(\"height\",50).append(\"g\").call(e),r[t.id]=e.value()}function g(){d3.select(\"#num-schools\").remove(),d3.select(\"#college-list\").remove();d3.select(\"#results\").append(\"div\").attr(\"id\",\"college-list\");var t=Object.keys(o).sort(function(t,e){return o[e]-o[t]}).slice(0,100),e=1;for(var a in t){var n=Number(t[a]);void 0!==l[n]&&-1!==o[n]&&(_(l[n],e),e+=1)}d3.select(\"#results\").insert(\"div\",\"#college-list\").attr(\"id\",\"num-schools\")}function _(t,e){var a=d3.select(\"#college-list\").append(\"div\").attr(\"class\",\"college-entry\").attr(\"id\",\"entry-\"+t.super_opeid).on(\"click\",function(t){return function(){F(t)}}(t)).append(\"div\").attr(\"class\",\"college-descr\");a.append(\"div\").attr(\"class\",\"college-title\").text(e.toString()+\". \"+t.name);var n=a.append(\"div\").attr(\"class\",\"college-subtitle\");n.append(\"span\").text(\"State: \"+t.state),n.append(\"div\").text(t.tier_name)}function b(t){return t.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g,\"$1,\")}function F(t){var e=d3.select(\"#school-details\");e.html(\"\"),e.append(\"h2\").text(t.name),function(t){var e=d3.select(\"#school-details\").append(\"div\").attr(\"id\",\"details-table\");e.append(\"h3\").text(\"College Details\");var a,n=e.append(\"table\");(a=n.append(\"tr\")).append(\"th\").text(\"State\"),a.append(\"td\").text(t.state),(a=n.append(\"tr\")).append(\"th\").text(\"Tier\"),a.append(\"td\").text(t.tier_name),(a=n.append(\"tr\")).append(\"th\").text(\"Enrollment\"),a.append(\"td\").text(b(t.ipeds_enrollment_2013)),(a=n.append(\"tr\")).append(\"th\").text(\"Sticker Price\"),a.append(\"td\").text(\"$\"+b(parseFloat(t.sticker_price_2013).toFixed(0))),(a=n.append(\"tr\")).append(\"th\").text(\"Low-Income Price\"),a.append(\"td\").text(\"$\"+b(parseFloat(t.scorecard_netprice_2013).toFixed(0))),(a=n.append(\"tr\")).append(\"th\").text(\"SAT Score\"),a.append(\"td\").text(parseFloat(t.sat_avg_2013).toFixed(0)),(a=n.append(\"tr\")).append(\"th\").text(\"Graduation Rate\"),a.append(\"td\").text((100*parseFloat(t.grad_rate_150_p_2013)).toFixed(0)+\"%\"),t.Web&&e.append(\"h3\").append(\"a\").attr(\"class\",\"website\").text(\"Website\").on(\"click\",function(e){window.open(\"http://\"+t.Web)})}(t);var a=d3.scaleOrdinal(d3.schemeCategory10),n=parseFloat(t.female).toFixed(2);w([{name:\"Female\",value:n},{name:\"Male\",value:(1-n).toFixed(2)}],\"Gender Ratio\",d3.scale.linear().range([\"pink\",\"blue\"]).domain([0,1]));var r=parseFloat(t.asian_or_pacific_share_fall_2000).toFixed(2),i=parseFloat(t.black_share_fall_2000).toFixed(2),l=parseFloat(t.hisp_share_fall_2000).toFixed(2);w([{name:\"Asian/Pacific\",value:r},{name:\"Black\",value:i},{name:\"Hispanic\",value:l},{name:\"Other\",value:m=(m=1-(parseFloat(i)+parseFloat(r)+parseFloat(l))).toFixed(2)}],\"Race Ratio\",a);var o=parseFloat(t.pct_arthuman_2000),d=parseFloat(t.pct_business_2000),s=parseFloat(t.pct_health_2000),c=parseFloat(t.pct_multidisci_2000),p=parseFloat(t.pct_publicsocial_2000),u=parseFloat(t.pct_stem_2000),f=parseFloat(t.pct_socialscience_2000),v=parseFloat(t.pct_tradepersonal_2000),m=1-(o+d+s+c+p+u+f+v);w([{name:\"Humanities\",value:o.toFixed(2)},{name:\"Business\",value:d.toFixed(2)},{name:\"Medicine\",value:s.toFixed(2)},{name:\"Multidisciplinary\",value:c.toFixed(2)},{name:\"Social Services\",value:p.toFixed(2)},{name:\"STEM\",value:u.toFixed(2)},{name:\"Social Sciences\",value:f.toFixed(2)},{name:\"Trade Services\",value:v.toFixed(2)},{name:\"Other\",value:m.toFixed(2)}],\"Major Ratio\",a),d3.selectAll(\".selected-circle\").classed(\"selected-circle\",!1).attr(\"r\",3).attr(\"fill\",\"black\").attr(\"opacity\",.5),d3.select(\"#id-\"+t.super_opeid).classed(\"selected-circle\",!0).attr(\"fill\",d3.rgb(255,223,0)).attr(\"opacity\",.8).attr(\"r\",15).raise(),d3.selectAll(\".selected-entry\").classed(\"selected-entry\",!1),d3.select(\"#entry-\"+t.super_opeid).classed(\"selected-entry\",!0)}function w(t,e,a){var n=d3.select(\"#school-details\").append(\"div\").attr(\"class\",\"chart\");n.append(\"h3\").text(e);var r=Math.min(200,200)/2,i=n.append(\"svg\").attr(\"class\",\"pie\").attr(\"width\",200).attr(\"height\",200).append(\"g\").attr(\"transform\",\"translate(100,100)\"),l=d3.arc().innerRadius(r-40).outerRadius(r),o=d3.pie().value(function(t){return t.value}).sort(null);i.selectAll(\"path\").data(o(t)).enter().append(\"g\").on(\"mouseover\",function(t){let e=d3.select(this).style(\"cursor\",\"pointer\").style(\"fill\",\"black\").append(\"g\").attr(\"class\",\"text-group\");e.append(\"text\").attr(\"class\",\"name-text\").text(`${t.data.name}`).attr(\"text-anchor\",\"middle\").attr(\"dy\",\"-1.2em\"),e.append(\"text\").attr(\"class\",\"value-text\").text(`${t.data.value}`).attr(\"text-anchor\",\"middle\").attr(\"dy\",\".6em\")}).on(\"mouseout\",function(t){d3.select(this).style(\"cursor\",\"none\").style(\"fill\",a(this._current)).select(\".text-group\").remove()}).append(\"path\").attr(\"d\",l).attr(\"fill\",(t,e)=>a(e)).on(\"mouseover\",function(t){d3.select(this).style(\"cursor\",\"pointer\").style(\"fill\",\"black\")}).on(\"mouseout\",function(t){d3.select(this).style(\"cursor\",\"none\").style(\"fill\",a(this._current))}).each(function(t,e){this._current=e});i.append(\"text\").attr(\"text-anchor\",\"middle\").attr(\"dy\",\".35em\").text(\"\")}function k(t){var e=0,a=0;for(var i in n)if(t[i+\"_norm\"]){var l=1-Math.abs(n[i]-t[i+\"_norm\"]);e+=r[i]*l,a+=r[i]}return e/a}function S(t){for(var e in l)t?-1!==o[e]&&(o[e]=k(l[e])):o[e]=k(l[e])}function j(){for(var t in r){var e=.9*r[t]+.1;d3.select(\"#\"+t+\"-button\").style(\"background-color\",\"rgba(0,180,255,\"+e.toString()+\")\")}}function M(){d3.select(\"#scatterplot\").remove();var t=\"mr_q\"+d,e=[];for(var a in l)e.push([o[a],l[a][t],a]);var n=d3.axisBottom().scale(u).ticks(5),r=d3.axisLeft().scale(f).tickFormat(d3.format(\"\")).ticks(5),i=d3.select(\"#graph\").append(\"div\").attr(\"class\",\"tooltip\").style(\"opacity\",0),v=d3.select(\"#graph\").append(\"svg\").attr(\"id\",\"scatterplot\").attr(\"width\",s).attr(\"height\",c+p);0!=d&&v.append(\"rect\").attr(\"x\",60).attr(\"y\",470-88*d).attr(\"height\",88).attr(\"width\",s-100).attr(\"fill\",d3.rgb(0,180,255)).attr(\"opacity\",.3),v.selectAll(\"circle\").data(e).enter().append(\"circle\").attr(\"id\",function(t){return\"id-\"+t[2]}).attr(\"cx\",function(t){return u(t[0])+p}).attr(\"cy\",function(t){return f(t[1])}).attr(\"r\",3).attr(\"opacity\",.5).on(\"click\",function(t){return F(l[t[2]])}).on(\"mouseover\",function(t){i.transition().duration(200).style(\"opacity\",.9),i.html(l[t[2]].name).style(\"left\",d3.event.pageX+\"px\").style(\"top\",d3.event.pageY-28+\"px\")}).on(\"mouseout\",function(t){i.transition().duration(500).style(\"opacity\",0)}),v.append(\"g\").attr(\"transform\",\"translate(\"+p+\",\"+(c-p)+\")\").call(n);v.append(\"text\").attr(\"transform\",\"translate(\"+(s/2+p)+\" ,\"+(c-p/2+20)+\")\").style(\"text-anchor\",\"middle\").html(\"Match Score &#x2753;\").on(\"mouseover\",function(){i.transition().duration(200).style(\"opacity\",.9),i.html(\"The match score is calculated based on how closely the college matches the selected filter criteria, weighted by how important each filter is.\").style(\"left\",d3.event.pageX+\"px\").style(\"top\",d3.event.pageY-28+\"px\")}).on(\"mouseout\",function(t){i.transition().duration(500).style(\"opacity\",0)});v.append(\"g\").attr(\"transform\",\"translate(\"+2*p+\",0)\").call(r),v.append(\"text\").attr(\"transform\",\"rotate(-90)\").attr(\"y\",0).attr(\"x\",0-c/2).attr(\"dy\",\"1em\").style(\"text-anchor\",\"middle\").html(\"Projected Income Rank &#x2753;\").on(\"mouseover\",function(){i.transition().duration(200).style(\"opacity\",.9),i.html(\"Income rank shows the percentile (compared to the US overall) of how much money students attending a given college make after graduation.\").style(\"left\",d3.event.pageX+\"px\").style(\"top\",d3.event.pageY-28+\"px\")}).on(\"mouseout\",function(t){i.transition().duration(500).style(\"opacity\",0)})}function O(t){t.text(i[d].name),t.append(\"span\").attr(\"class\",\"icon\").html(\"&#9662;\")}d3.json(\"data/incomes.json\",function(t){for(var e in t){var a=t[e];i[a.id]={...t[e]}}console.log(\"income data loaded\")}),d3.csv(\"data/college_data.csv\",function(t){for(var e=0;e<t.length;e++){var a=t[e].super_opeid;l[a]={...t[e]}}console.log(\"college data loaded\"),d3.json(\"data/filter-options.json\",function(t){for(var e in t){var a=t[e];m(a),v(a)}console.log(\"filter data loaded\")}),d3.json(\"data/slider-options.json\",function(t){for(var e in t){var a=t[e];m(a),x(a),y(a)}console.log(\"slider data loaded\"),S(!1),g(),M(),j()}),function(){var t=d3.select(\"#mobility-dropdown\").append(\"div\").attr(\"id\",\"dropdown\"),e=t.append(\"div\").attr(\"id\",\"dropdown-button\");O(e);for(var a=t.append(\"div\").attr(\"id\",\"dropdown-menu\"),n=0;n<6;n++)a.append(\"div\").attr(\"class\",\"dropdown-menu-entry\").attr(\"id\",n).text(i[n].name).on(\"click\",function(){d=this.id,M(),O(e)})}(),d3.select(\"#results-container\").insert(\"div\",\"#results\").attr(\"id\",\"search-bar\").append(\"input\").attr(\"type\",\"text\").attr(\"id\",\"search-input\").attr(\"placeholder\",\"Search for a college...\").on(\"keyup\",function(){var t=d3.select(\"#search-input\").property(\"value\").toLowerCase();for(var e in l){var a=l[e].name.toLowerCase(),n=l[e].super_opeid,r=d3.select(\"#results\").select(\"#entry-\"+n);a.indexOf(t)>-1?r.style(\"display\",\"\"):r.style(\"display\",\"none\")}})})}]);","extractedComments":[]}