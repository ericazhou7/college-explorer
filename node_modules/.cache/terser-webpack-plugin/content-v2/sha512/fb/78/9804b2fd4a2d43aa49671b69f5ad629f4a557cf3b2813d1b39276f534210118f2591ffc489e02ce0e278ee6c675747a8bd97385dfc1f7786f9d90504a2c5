{"code":"!function(t){var e={};function a(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,\"a\",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p=\"\",a(a.s=0)}([function(t,e){var a={},n={},r={},l={},i={},o=550,d=400,s=30,c=d3.scale.linear().domain([0,1]).range([s,o-2*s]),p=d3.scale.linear().domain([0,2.5]).range([d-s,s]);function u(t){var e=d3.select(\"#\"+t.type).append(\"div\").attr(\"id\",t.id).attr(\"class\",\"filter\");for(var n in e.append(\"h4\").text(t.name),a[t.id]=new Set([]),t.options){var r=t.options[n];e.append(\"div\").attr(\"id\",r.id).attr(\"class\",\"filter-option active\").text(r.name).on(\"click\",x(t,r)),a[t.id].add(r.value)}}function f(t){d3.select(\"#filter-buttons\").append(\"div\").attr(\"id\",t.id+\"-button\").attr(\"class\",\"filter-button\").text(t.name).on(\"click\",function(t){return function(){!function(t){d3.selectAll(\".filter-button\").classed(\"active\",!1),d3.select(\"#\"+t.id+\"-button\").classed(\"active\",!0),d3.selectAll(\".filter-tool\").style(\"display\",\"none\");d3.select(\"#filter-space\").select(\"#\"+t.id).style(\"display\",\"inline\")}(t)}}(t))}function v(t){var e=d3.sliderHorizontal().domain([t.min,t.max]).default((t.max+t.min)/2).width(150).ticks(2).on(\"onchange\",a=>{n[t.id]=(e.value()-t.min)/(t.max-t.min),S(),g(),j()}),a=d3.select(\"#filter-space\").append(\"div\").style(\"display\",\"none\").attr(\"class\",\"filter-tool\").attr(\"id\",t.id);a.append(\"h3\").text(\"Target Value:\");a.append(\"div\").attr(\"class\",\"filter-slider\").append(\"svg\").attr(\"width\",150).attr(\"height\",50).append(\"g\").call(e);n[t.id]=(e.value()-t.min)/(t.max-t.min)}function m(t){d3.select(\"#\"+t.type);var e=d3.sliderHorizontal().max(1).default(.5).width(150).ticks(2).fill(\"blue\").on(\"onchange\",a=>{r[t.id]=e.value(),S(),g(),j(),k()}),a=d3.select(\"#\"+t.id);a.append(\"h3\").text(\"Importance:\"),a.append(\"div\").attr(\"class\",\"filter-weight\").append(\"svg\").attr(\"width\",150).attr(\"height\",50).append(\"g\").call(e),r[t.id]=e.value()}function x(t,e){return function(){!function(t,e){const n=a[t.id].has(e.value);n?a[t.id].delete(e.value):a[t.id].add(e.value);for(var r in l)l[r][t.id]===e.value&&(i[r]=n?0:h(l[r])?1:0);g();d3.select(\"#\"+e.id).classed(\"active\",!n)}(t,e)}}function h(t){for(var e in a){const n=a[e],r=t[e];if(!n.has(r))return!1}return!0}function g(){d3.select(\"#num-schools\").remove(),d3.select(\"#college-list\").remove();d3.select(\"#results\").append(\"div\").attr(\"id\",\"college-list\");var t=Object.keys(i).sort(function(t,e){return i[e]-i[t]}).slice(0,100),e=1;for(var a in t)id=Number(t[a]),void 0!==l[id]&&(_(l[id],e),e+=1);d3.select(\"#results\").insert(\"div\",\"#college-list\").attr(\"id\",\"num-schools\")}function _(t,e){var a=d3.select(\"#college-list\").append(\"div\").attr(\"class\",\"college-entry\").attr(\"id\",\"entry-\"+t.super_opeid).on(\"click\",function(t){return function(){!function(t){var e=d3.select(\"#school-details\");e.html(\"\"),e.append(\"h2\").text(t.name),function(t){var e=d3.select(\"#school-details\").append(\"div\").attr(\"id\",\"details-table\");e.append(\"h3\").text(\"College Details\");var a,n=e.append(\"table\");(a=n.append(\"tr\")).append(\"th\").text(\"State\"),a.append(\"td\").text(t.state),(a=n.append(\"tr\")).append(\"th\").text(\"Tier\"),a.append(\"td\").text(t.tier_name),(a=n.append(\"tr\")).append(\"th\").text(\"Enrollment\"),a.append(\"td\").text(y(t.ipeds_enrollment_2013)),(a=n.append(\"tr\")).append(\"th\").text(\"Sticker Price\"),a.append(\"td\").text(\"$\"+y(parseFloat(t.sticker_price_2013).toFixed(0))),(a=n.append(\"tr\")).append(\"th\").text(\"Low-Income Price\"),a.append(\"td\").text(\"$\"+y(parseFloat(t.scorecard_netprice_2013).toFixed(0))),(a=n.append(\"tr\")).append(\"th\").text(\"SAT Score\"),a.append(\"td\").text(parseFloat(t.sat_avg_2013).toFixed(0)),(a=n.append(\"tr\")).append(\"th\").text(\"Graduation Rate\"),a.append(\"td\").text((100*parseFloat(t.grad_rate_150_p_2013)).toFixed(0)+\"%\")}(t);var a=d3.scaleOrdinal(d3.schemeCategory10),n=parseFloat(t.female).toFixed(2),r=(1-n).toFixed(2);b([{name:\"Female\",value:n},{name:\"Male\",value:r}],\"Gender Ratio\",d3.scale.linear().range([\"pink\",\"blue\"]).domain([0,1]));var l=parseFloat(t.asian_or_pacific_share_fall_2000).toFixed(2),i=parseFloat(t.black_share_fall_2000).toFixed(2),o=parseFloat(t.hisp_share_fall_2000).toFixed(2),d=1-(parseFloat(i)+parseFloat(l)+parseFloat(o));console.log(d),b([{name:\"Asian/Pacific\",value:l},{name:\"Black\",value:i},{name:\"Hispanic\",value:o},{name:\"Other\",value:d}],\"Race Ratio\",a);var s=parseFloat(t.pct_arthuman_2000),c=parseFloat(t.pct_business_2000),p=parseFloat(t.pct_health_2000),u=parseFloat(t.pct_multidisci_2000),f=parseFloat(t.pct_publicsocial_2000),v=parseFloat(t.pct_stem_2000),m=parseFloat(t.pct_socialscience_2000),x=parseFloat(t.pct_tradepersonal_2000),d=1-(s+c+p+u+f+v+m+x);b([{name:\"Arts & Humanities\",value:s.toFixed(2)},{name:\"Business\",value:c.toFixed(2)},{name:\"Health & Medicine\",value:p.toFixed(2)},{name:\"Multidisciplinary\",value:u.toFixed(2)},{name:\"Public & Social Services\",value:f.toFixed(2)},{name:\"STEM\",value:v.toFixed(2)},{name:\"Social Sciences\",value:m.toFixed(2)},{name:\"Trade & Personal Services\",value:x.toFixed(2)},{name:\"Other\",value:d.toFixed(2)}],\"Major Ratio\",a),d3.selectAll(\".selected\").classed(\"selected\",!1).attr(\"r\",3).attr(\"fill\",\"black\"),d3.selectAll(\"#id-\"+t.super_opeid).classed(\"selected\",!0).attr(\"fill\",d3.rgb(\"#ffdf00\")).attr(\"r\",25),d3.selectAll(\".selected-entry\").classed(\"selected-entry\",!1),d3.select(\"#entry-\"+t.super_opeid).classed(\"selected-entry\",!0)}(t)}}(t));a.append(\"img\").attr(\"src\",\"data/college-pic.png\");var n=a.append(\"div\").attr(\"class\",\"college-descr\");n.append(\"div\").attr(\"class\",\"college-title\").text(e.toString()+\". \"+t.name);var r=n.append(\"div\").attr(\"class\",\"college-subtitle\");r.append(\"span\").text(\"State: \"+t.state),r.append(\"div\").text(t.tier_name)}function y(t){return t.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g,\"$1,\")}function b(t,e,a){var n=d3.select(\"#school-details\").append(\"div\").attr(\"class\",\"chart\");n.append(\"h3\").text(e);var r=Math.min(200,200)/2,l=n.append(\"svg\").attr(\"class\",\"pie\").attr(\"width\",200).attr(\"height\",200).append(\"g\").attr(\"transform\",\"translate(100,100)\"),i=d3.arc().innerRadius(r-40).outerRadius(r),o=d3.pie().value(function(t){return t.value}).sort(null);l.selectAll(\"path\").data(o(t)).enter().append(\"g\").on(\"mouseover\",function(t){let e=d3.select(this).style(\"cursor\",\"pointer\").style(\"fill\",\"black\").append(\"g\").attr(\"class\",\"text-group\");e.append(\"text\").attr(\"class\",\"name-text\").text(`${t.data.name}`).attr(\"text-anchor\",\"middle\").attr(\"dy\",\"-1.2em\"),e.append(\"text\").attr(\"class\",\"value-text\").text(`${t.data.value}`).attr(\"text-anchor\",\"middle\").attr(\"dy\",\".6em\")}).on(\"mouseout\",function(t){d3.select(this).style(\"cursor\",\"none\").style(\"fill\",a(this._current)).select(\".text-group\").remove()}).append(\"path\").attr(\"d\",i).attr(\"fill\",(t,e)=>a(e)).on(\"mouseover\",function(t){d3.select(this).style(\"cursor\",\"pointer\").style(\"fill\",\"black\")}).on(\"mouseout\",function(t){d3.select(this).style(\"cursor\",\"none\").style(\"fill\",a(this._current))}).each(function(t,e){this._current=e});l.append(\"text\").attr(\"text-anchor\",\"middle\").attr(\"dy\",\".35em\").text(\"\")}function F(t){var e=0,a=0;for(var l in n){var i=1-Math.abs(n[l]-t[l+\"_norm\"]);e+=r[l]*i,a+=r[l]}return e/a}function S(){for(var t in l)i[t]=F(l[t]);console.log(\"scores calculated\")}function k(){for(var t in r){var e=255-(150*r[t]+60);d3.select(\"#\"+t+\"-button\").style(\"background-color\",\"rgba(0,\"+e.toString()+\",255)\")}}function j(){d3.select(\"#scatterplot\").remove();var t=[];for(var e in l)t.push([i[e],Number(l[e].k_mean)/Number(l[e].par_mean),e]);var a=d3.axisBottom().scale(c).ticks(5),n=d3.axisLeft().scale(p).tickFormat(d3.format(\"\")).ticks(5),r=d3.select(\"#graph\").append(\"div\").attr(\"class\",\"tooltip\").style(\"opacity\",0),u=d3.select(\"#graph\").append(\"svg\").attr(\"id\",\"scatterplot\").attr(\"width\",o).attr(\"height\",d+s);u.selectAll(\"circle\").data(t).enter().append(\"circle\").attr(\"id\",function(t){return\"id-\"+t[2]}).attr(\"cx\",function(t){return c(t[0])+s}).attr(\"cy\",function(t){return p(t[1])}).attr(\"r\",3).attr(\"opacity\",.5).on(\"mouseover\",function(t){r.transition().duration(200).style(\"opacity\",.9),r.html(l[t[2]].name).style(\"left\",d3.event.pageX+\"px\").style(\"top\",d3.event.pageY-28+\"px\")}).on(\"mouseout\",function(t){r.transition().duration(500).style(\"opacity\",0)}),u.append(\"g\").attr(\"transform\",\"translate(\"+s+\",\"+(d-s)+\")\").call(a),u.append(\"text\").attr(\"transform\",\"translate(\"+(o/2+s)+\" ,\"+(d-s/2+20)+\")\").style(\"text-anchor\",\"middle\").text(\"Match Score\"),u.append(\"g\").attr(\"transform\",\"translate(\"+2*s+\",0)\").call(n),u.append(\"text\").attr(\"transform\",\"rotate(-90)\").attr(\"y\",0).attr(\"x\",0-d/2).attr(\"dy\",\"1em\").style(\"text-anchor\",\"middle\").text(\"Ratio of Average Child to Parent Income\")}d3.csv(\"data/college_data.csv\",function(t){for(var e=0;e<t.length;e++){var a=t[e].super_opeid;l[a]={...t[e]}}console.log(\"college data loaded\"),d3.json(\"data/filter-options.json\",function(t){for(var e in t){var a=t[e];u(a)}console.log(\"filter data loaded\")}),d3.json(\"data/slider-options.json\",function(t){for(var e in t){var a=t[e];f(a),v(a),m(a)}console.log(\"slider data loaded\"),S(),g(),j(),k()})})}]);","extractedComments":[]}